!function(e){"use strict";const t={version:"1.1.0",theme:{_key:"ui-theme",init(){const e=localStorage.getItem(this._key),t=window.matchMedia("(prefers-color-scheme: dark)").matches;("dark"===e||!e&&t)&&document.documentElement.classList.add("dark"),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem(this._key)||document.documentElement.classList.toggle("dark",e.matches)})},toggle(){const e=document.documentElement.classList.toggle("dark");return localStorage.setItem(this._key,e?"dark":"light"),e},set(e){if("dark"===e)document.documentElement.classList.add("dark");else{if("light"!==e){localStorage.removeItem(this._key);const e=window.matchMedia("(prefers-color-scheme: dark)").matches;return void document.documentElement.classList.toggle("dark",e)}document.documentElement.classList.remove("dark")}localStorage.setItem(this._key,e)},get:()=>document.documentElement.classList.contains("dark")?"dark":"light"},modal:{_stack:[],open(e={}){const{title:t="",content:n="",html:o=null,size:s="default",closable:i=!0,showClose:a=!1,onClose:r=null,footer:l=null}=e,c=document.createElement("div");c.className="ui-modal-overlay",c.setAttribute("data-ui-modal","");const d=document.createElement("div");d.className="ui-modal","lg"===s&&d.classList.add("ui-modal-lg"),"xl"===s&&d.classList.add("ui-modal-xl");const m=a?'\n          <button class="ui-modal-close" data-close>\n            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>\n          </button>\n        ':"",u=t?`<h3 class="ui-modal-title">${t}</h3>`:"",h=o||(n?`<p class="ui-modal-desc">${n}</p>`:""),p=l?`<div class="ui-modal-actions">${l}</div>`:"";d.innerHTML=`\n          ${m}\n          ${u}\n          ${h}\n          ${p}\n        `,c.appendChild(d),document.body.appendChild(c),document.body.style.overflow="hidden";const g={overlay:c,modal:d,onClose:r};this._stack.push(g),i&&(c.addEventListener("click",e=>{e.target===c&&this.close(g)}),d.querySelector("[data-close]")?.addEventListener("click",()=>this.close(g)));const y=e=>{"Escape"===e.key&&i&&(this.close(g),document.removeEventListener("keydown",y))};return document.addEventListener("keydown",y),g.escHandler=y,g},close(e){if(e){const t=this._stack.indexOf(e);t>-1&&this._stack.splice(t,1)}else e=this._stack.pop();e&&(e.overlay.style.opacity="0",setTimeout(()=>{e.overlay.remove(),0===this._stack.length&&(document.body.style.overflow=""),e.onClose&&e.onClose()},200),e.escHandler&&document.removeEventListener("keydown",e.escHandler))},closeAll(){for(;this._stack.length;)this.close()},confirm(e={}){return new Promise(t=>{const{title:n="确认",content:o="确定要执行此操作吗？",confirmText:s="确定",cancelText:i="取消",danger:a=!1,icon:r=null}=e;let l="";if(r||a){const e=a?"danger":r||"warning",t={danger:'<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg>',warning:'<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>',success:'<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>'};l=`<div class="ui-modal-icon ${e}">${t[e]||t.warning}</div>`}const c=this.open({html:`\n              ${l}\n              <h3 class="ui-modal-title">${n}</h3>\n              <p class="ui-modal-desc">${o}</p>\n            `,footer:`\n              <button class="ui-modal-btn-cancel" data-action="cancel">${i}</button>\n              <button class="ui-modal-btn-confirm ${a?"danger":""}" data-action="confirm">${s}</button>\n            `,onClose:()=>t(!1)});c.modal.querySelector('[data-action="cancel"]').addEventListener("click",()=>{this.close(c),t(!1)}),c.modal.querySelector('[data-action="confirm"]').addEventListener("click",()=>{this.close(c),t(!0)})})}},toast:{_container:null,_getContainer(){return this._container||(this._container=document.createElement("div"),this._container.style.cssText="\n            position: fixed;\n            bottom: 1.5rem;\n            left: 50%;\n            transform: translateX(-50%);\n            z-index: 9999;\n            display: flex;\n            flex-direction: column;\n            gap: 0.5rem;\n            align-items: center;\n            pointer-events: none;\n          ",document.body.appendChild(this._container)),this._container},show(e,t={}){const{type:n="info",duration:o=3e3}=t,s=document.createElement("div");s.style.cssText="\n          background: #36393f;\n          color: #dcddde;\n          padding: 0.75rem 1rem;\n          border-radius: 0.5rem;\n          font-size: 0.875rem;\n          font-weight: 500;\n          display: flex;\n          align-items: center;\n          gap: 0.625rem;\n          box-shadow: 0 8px 16px rgba(0,0,0,0.24);\n          pointer-events: auto;\n          transform: translateY(20px);\n          opacity: 0;\n          transition: all 0.2s ease;\n          max-width: 24rem;\n        ",s.innerHTML=`\n          <span>${e}</span>\n        `,this._getContainer().appendChild(s),requestAnimationFrame(()=>{s.style.transform="translateY(0)",s.style.opacity="1"});const i=()=>{s.style.transform="translateY(20px)",s.style.opacity="0",setTimeout(()=>s.remove(),200)};return o>0&&setTimeout(i,o),{remove:i}},success(e,t={}){return this.show(e,{...t,type:"success"})},error(e,t={}){return this.show(e,{...t,type:"danger"})},warning(e,t={}){return this.show(e,{...t,type:"warning"})},info(e,t={}){return this.show(e,{...t,type:"info"})}},dropdown:{init(){document.addEventListener("click",e=>{const t=e.target.closest("[data-dropdown]");if(t){e.preventDefault();const n=t.closest(".ui-dropdown");n&&n.classList.toggle("open")}else document.querySelectorAll(".ui-dropdown.open").forEach(e=>e.classList.remove("open"))})},open(e){e.classList.add("open")},close(e){e.classList.remove("open")},toggle(e){e.classList.toggle("open")}},sidebar:{open(e){const t=document.querySelector(e),n=document.querySelector(`${e}-overlay`);t&&(t.classList.add("open"),document.body.style.overflow="hidden"),n&&(n.style.display="block",n.addEventListener("click",()=>this.close(e),{once:!0}))},close(e){const t=document.querySelector(e),n=document.querySelector(`${e}-overlay`);t&&(t.classList.remove("open"),document.body.style.overflow=""),n&&(n.style.display="none")},toggle(e){const t=document.querySelector(e);t?.classList.contains("open")?this.close(e):this.open(e)}},accordion:{init(){document.addEventListener("click",e=>{const t=e.target.closest(".ui-accordion-header");if(t){const e=t.closest(".ui-accordion-item");e&&e.classList.toggle("open")}})},open(e){"string"==typeof e&&(e=document.querySelector(e)),e?.classList.add("open")},close(e){"string"==typeof e&&(e=document.querySelector(e)),e?.classList.remove("open")},toggle(e){"string"==typeof e&&(e=document.querySelector(e)),e?.classList.toggle("open")}},tabs:{init(){document.addEventListener("click",e=>{const t=e.target.closest(".ui-tab[data-tab]");if(t){const e=t.closest(".ui-tabs"),n=t.dataset.tab;e.querySelectorAll(".ui-tab").forEach(e=>e.classList.remove("active")),t.classList.add("active");(e.closest("[data-tabs-container]")||e.parentElement).querySelectorAll(".ui-tab-panel").forEach(e=>{e.classList.toggle("active",e.dataset.panel===n),e.style.display=e.dataset.panel===n?"":"none"})}})}},loading:{_overlay:null,show(e={}){const{text:t="加载中...",target:n=document.body}=e;this._overlay&&this.hide(),this._overlay=document.createElement("div"),this._overlay.style.cssText=`\n          position: ${n===document.body?"fixed":"absolute"};\n          inset: 0;\n          background: rgba(255, 255, 255, 0.8);\n          backdrop-filter: blur(4px);\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          gap: 1rem;\n          z-index: 9999;\n        `,this._overlay.innerHTML=`\n          <div class="ui-spinner"></div>\n          ${t?`<div style="font-weight:700;color:var(--ui-text-muted);">${t}</div>`:""}\n        `,n!==document.body&&(n.style.position="relative"),n.appendChild(this._overlay)},hide(){this._overlay&&(this._overlay.remove(),this._overlay=null)}},validate:{rules:{required:e=>""!==e.trim()||"此字段为必填项",email:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||"请输入有效的邮箱地址",minLength:e=>t=>t.length>=e||`最少需要 ${e} 个字符`,maxLength:e=>t=>t.length<=e||`最多允许 ${e} 个字符`,pattern:(e,t)=>n=>e.test(n)||t,match:(e,t)=>n=>{const o=document.querySelector(e);return o&&n===o.value||t||"两次输入不一致"}},field(e,t){const n=e.value,o=[];for(const e of t){const t="function"==typeof e?e(n):e;!0!==t&&o.push(t)}let s=e.parentElement.querySelector(".ui-field-error");return o.length>0?(e.style.borderColor="var(--ui-danger)",s||(s=document.createElement("div"),s.className="ui-field-error",s.style.cssText="color:var(--ui-danger);font-size:0.75rem;font-weight:700;margin-top:0.25rem;",e.parentElement.appendChild(s)),s.textContent=o[0]):(e.style.borderColor="",s&&s.remove()),0===o.length},form(e,t){let n=!0;for(const[o,s]of Object.entries(t)){const t=e.querySelector(`[name="${o}"]`);t&&!this.field(t,s)&&(n=!1)}return n}},utils:{debounce(e,t=300){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>e.apply(this,o),t)}},throttle(e,t=300){let n;return function(...o){n||(e.apply(this,o),n=!0,setTimeout(()=>n=!1,t))}},formatDate(e,t="YYYY-MM-DD HH:mm"){const n=new Date(e),o={YYYY:n.getFullYear(),MM:String(n.getMonth()+1).padStart(2,"0"),DD:String(n.getDate()).padStart(2,"0"),HH:String(n.getHours()).padStart(2,"0"),mm:String(n.getMinutes()).padStart(2,"0"),ss:String(n.getSeconds()).padStart(2,"0")};return t.replace(/YYYY|MM|DD|HH|mm|ss/g,e=>o[e])},async copyToClipboard(e){try{return await navigator.clipboard.writeText(e),!0}catch{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();const n=document.execCommand("copy");return document.body.removeChild(t),n}},uniqueId:(e="ui")=>`${e}_${Math.random().toString(36).substr(2,9)}`},init(){this.theme.init(),this.dropdown.init(),this.accordion.init(),this.tabs.init(),document.querySelectorAll("[data-theme-toggle]").forEach(e=>{e.addEventListener("click",()=>this.theme.toggle())}),console.log(`LiteUI v${this.version} initialized`)}};e.UI=t,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>t.init()):t.init()}("undefined"!=typeof window?window:this);